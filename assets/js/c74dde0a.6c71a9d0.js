"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[50533],{55608:(e,o,t)=>{t.d(o,{d:()=>l});const l={snowplowMicro:"1.3.3",scalaTracker:"2.0.0",collector:"2.8.0"}},21137:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>n,metadata:()=>i,toc:()=>d});var l=t(87462),a=(t(67294),t(3905)),r=t(55608),c=t(90814);const n={title:"Set up the stream collector",date:"2021-08-04",sidebar_position:-10},s=void 0,i={unversionedId:"pipeline-components-and-applications/stream-collector/setup/index",id:"pipeline-components-and-applications/stream-collector/setup/index",title:"Set up the stream collector",description:"Available on Terraform Registry",source:"@site/docs/pipeline-components-and-applications/stream-collector/setup/index.md",sourceDirName:"pipeline-components-and-applications/stream-collector/setup",slug:"/pipeline-components-and-applications/stream-collector/setup/",permalink:"/docs/pipeline-components-and-applications/stream-collector/setup/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/pipeline-components-and-applications/stream-collector/setup/index.md",tags:[],version:"current",lastUpdatedAt:1663938402,formattedLastUpdatedAt:"Sep 23, 2022",sidebarPosition:-10,frontMatter:{title:"Set up the stream collector",date:"2021-08-04",sidebar_position:-10},sidebar:"defaultSidebar",previous:{title:"Stream Collector",permalink:"/docs/pipeline-components-and-applications/stream-collector/"},next:{title:"Configure the Stream Collector",permalink:"/docs/pipeline-components-and-applications/stream-collector/configure/"}},p={},d=[{value:"Available on Terraform Registry",id:"available-on-terraform-registry",level:2},{value:"Run the collector",id:"run-the-collector",level:2},{value:"Health check",id:"health-check",level:2}],m={toc:d};function u(e){let{components:o,...t}=e;return(0,a.kt)("wrapper",(0,l.Z)({},m,t,{components:o,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"available-on-terraform-registry"},"Available on Terraform Registry"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://registry.terraform.io/modules/snowplow-devops/collector-kinesis-ec2/aws/latest"},(0,a.kt)("img",{parentName:"a",src:"https://img.shields.io/static/v1?label=Terraform&message=Registry&color=7B42BC&logo=terraform",alt:null}))),(0,a.kt)("p",null,"A Terraform module is available which deploys the stream collector on a AWS EC2 without the need for this manual setup."),(0,a.kt)("h2",{id:"run-the-collector"},"Run the collector"),(0,a.kt)("p",null,"The stream collector is on docker hub with several different flavours. Pull the image that matches the sink you are using:"),(0,a.kt)(c.Z,{language:"bash",mdxType:"CodeBlock"},"docker pull snowplow/scala-stream-collector-kinesis:"+r.d.collector+"\ndocker pull snowplow/scala-stream-collector-pubsub:"+r.d.collector+"\ndocker pull snowplow/scala-stream-collector-kafka:"+r.d.collector+"\ndocker pull snowplow/scala-stream-collector-rabbitmq-experimental:"+r.d.collector+"\ndocker pull snowplow/scala-stream-collector-nsq:"+r.d.collector+"\ndocker pull snowplow/scala-stream-collector-stdout:"+r.d.collector+"\n"),(0,a.kt)("p",null,"The application is configured by passing a hocon file on the command line:"),(0,a.kt)(c.Z,{language:"bash",mdxType:"CodeBlock"},"docker run --rm \\\n  -v $PWD/config.hocon:/snowplow/config.hocon \\\n  -p 8080:8080 \\\n  snowplow/scala-stream-collector-${flavour}:"+r.d.collector+" --config /snowplow/config.hocon\n"),(0,a.kt)("p",null,"Alternatively, you can download and run ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/snowplow/stream-collector/releases"},"a jar file from the github release"),"."),(0,a.kt)(c.Z,{language:"bash",mdxType:"CodeBlock"},"java -jar scala-stream-collector-kinesis-"+r.d.collector+".jar --config /path/to/config.hocon\n"),(0,a.kt)("h2",{id:"health-check"},"Health check"),(0,a.kt)("p",null,"Pinging the collector on the /health path should return a 200 OK response:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://localhost:8080/health\n")))}u.isMDXComponent=!0}}]);